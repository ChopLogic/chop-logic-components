import{r as p,C as h,j as g}from"./iframe-CBEd8IQ4.js";import{c as v,L as I,M as V,d as N}from"./Header-CSxk79h1.js";import"./Icon-BhaWZDu4.js";import"./Loader-CbQUfs1L.js";import"./Portal-BvJ0_6BA.js";import{u as _}from"./use-click-outside-CCfvGGcE.js";import{u as L}from"./use-key-press-BipOIjs9.js";import{g as j}from"./get-class-name-CHDn80c0.js";import{s as k}from"./Select.module-DHd5GItA.js";import{u as w}from"./use-reset-form-input-KFMp1UJi.js";function A({name:t,options:l,initialValues:e,defaultValue:s}){return l.map(d=>{let n=!1;return e&&(e!=null&&e[t])&&Array.isArray(e[t])&&e[t].find(a=>a===d.id||(a==null?void 0:a.id)===d.id)&&(n=!0),!(e!=null&&e[t])&&Array.isArray(s)&&s.find(a=>a===d.id)&&(n=!0),{...d,selected:n}})}const x=t=>t.filter(l=>l.selected).map(l=>l.id),E=(t,l)=>{const e=t.find(s=>s.id===l);return t.map(s=>s.id===l?{...s,selected:!(e!=null&&e.selected)}:s)};function O({name:t,defaultValue:l,onChange:e,options:s}){const[d,n]=p.useState(!1),{onChangeFormInput:r,initialValues:a}=p.useContext(h),o=A({name:t,options:s,initialValues:a,defaultValue:l}),[f,m]=p.useState(o),u=()=>n(!1),y=()=>n(!d),S=C=>{const i=E(f,C);m(i),e==null||e(i),r==null||r({name:t,value:x(i)})},c=p.useCallback(()=>{n(!1),m(o),r==null||r({name:t,value:x(o)})},[t]);return w(c),{handleClose:u,handleToggle:y,handleSelect:S,opened:d,values:f}}const G=({options:t,name:l,label:e,required:s=!1,placeholder:d="Not selected",disabled:n=!1,onChange:r,defaultValue:a,id:o,className:f,...m})=>{const u=p.useRef(null),{elementId:y,dropdownId:S}=v(o),{handleClose:c,handleSelect:C,handleToggle:i,opened:b,values:q}=O({name:l,options:t,defaultValue:a,onChange:r}),M=j([k.wrapper,f]);return _({ref:u,onClickOutsideHandler:c}),L({keyCode:"Escape",ref:u,onKeyPress:c}),g.jsxs("div",{ref:u,...m,className:M,children:[g.jsx(I,{label:e,required:s,inputId:y}),g.jsx(V,{name:l,opened:b,comboboxId:y,dropdownId:S,onClick:i,values:q,placeholder:d,disabled:n,required:s}),g.jsx(N,{options:q,opened:b,onClose:c,dropdownId:S,onSelect:C})]})};try{MultiSelect.displayName="MultiSelect",MultiSelect.__docgenInfo={description:"",displayName:"MultiSelect",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"ChopLogicSelectValue[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((values?: ChopLogicSelectValue[]) => void)"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number | readonly string[]"}},placeholder:{defaultValue:{value:"Not selected"},description:"",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch{}export{G as C};
