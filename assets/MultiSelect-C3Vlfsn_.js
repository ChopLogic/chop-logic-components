var $=Object.defineProperty,U=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var D=(e,l,t)=>l in e?$(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,V=(e,l)=>{for(var t in l||(l={}))A.call(l,t)&&D(e,t,l[t]);if(h)for(var t of h(l))O.call(l,t)&&D(e,t,l[t]);return e},q=(e,l)=>U(e,F(l));var K=(e,l)=>{var t={};for(var n in e)A.call(e,n)&&l.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&h)for(var n of h(e))l.indexOf(n)<0&&O.call(e,n)&&(t[n]=e[n]);return t};import{j as s,r as c}from"./iframe-ByKzMmaK.js";import{L as T}from"./Label-DQdSVFEl.js";import{u as B}from"./use-click-outside-DREiv8zp.js";import{u as H}from"./use-element-ids-CshNHWkw.js";import{u as z}from"./use-key-press-B_vXJT53.js";import{g as N}from"./get-class-name-BY88G7uf.js";import{s as G,a as I,b as R,h as J,c as Q}from"./Option.module-CTReddGl.js";import{A as W,b as X,c as Y,d as Z}from"./Icon-BZD9s1Z_.js";import{F as ee,u as te}from"./use-reset-form-input-DpBZcUfi.js";const C=({values:e,placeholder:l})=>{const t=e?e.filter(r=>r.selected).map(r=>r.label):[],n=t.length!==0&&t.length===(e==null?void 0:e.length),a=t.length===1,o=t.length>1;return n?s.jsx("span",{children:"All items selected"}):a?s.jsx("span",{children:t[0]}):o?s.jsx("span",{children:`${t.length} items selected`}):s.jsx("span",{children:l})};try{C.displayName="MultiSelectComboboxSelectedValues",C.__docgenInfo={description:"",displayName:"MultiSelectComboboxSelectedValues",props:{values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"MultiSelectValue[]"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}}}}}catch(e){}const M=({opened:e,onClick:l,comboboxId:t,dropdownId:n,name:a,placeholder:o,disabled:r,required:d,values:u})=>{const p=u==null?void 0:u.filter(i=>i.selected).map(i=>i.id);return s.jsxs("button",{type:"button",name:a,value:p,role:"combobox","aria-haspopup":"listbox","aria-expanded":e,"aria-controls":n,id:t,onClick:l,disabled:r,"aria-required":d,className:G.combobox,children:[s.jsx(C,{values:u,placeholder:o}),e?s.jsx(W,{}):s.jsx(X,{})]})};try{M.displayName="MultiSelectCombobox",M.__docgenInfo={description:"",displayName:"MultiSelectCombobox",props:{opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},required:{defaultValue:null,description:"",name:"required",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},comboboxId:{defaultValue:null,description:"",name:"comboboxId",required:!0,type:{name:"string"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"MultiSelectValue[]"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}}}catch(e){}function le({name:e,options:l,initialValues:t,defaultValue:n}){return l.map(a=>{let o=!1;return t!=null&&t[e]&&Array.isArray(t[e])&&t[e].find(d=>d===a.id||(d==null?void 0:d.id)===a.id)&&(o=!0),!(t!=null&&t[e])&&Array.isArray(n)&&n.find(d=>d===a.id)&&(o=!0),q(V({},a),{selected:o})})}const E=e=>e.filter(l=>l.selected).map(l=>l.id),ne=(e,l)=>{const t=e.find(n=>n.id===l);return e.map(n=>n.id===l?q(V({},n),{selected:!(t!=null&&t.selected)}):n)};function re({name:e,defaultValue:l,onChange:t,options:n}){const[a,o]=c.useState(!1),{onChangeFormInput:r,initialValues:d}=c.useContext(ee),u=le({name:e,options:n,initialValues:d,defaultValue:l}),[p,i]=c.useState(u),y=c.useRef(r),m=c.useRef(u);y.current=r,m.current=u;const b=()=>o(!1),S=()=>o(!a),g=f=>{const x=ne(p,f);i(x),t==null||t(x),r==null||r({name:e,value:E(x)})},_=c.useCallback(()=>{var f;o(!1),i(m.current),(f=y.current)==null||f.call(y,{name:e,value:E(m.current)})},[e]);return te(_),{handleClose:b,handleToggle:S,handleSelect:g,opened:a,values:p}}const w=({value:e,onSelect:l})=>{const{id:t,label:n,selected:a}=e,o=N([I.option,I.option__multi,{[I.option__selected]:a}]),r=d=>u=>{switch(u.key){case" ":case"SpaceBar":case"Enter":u.preventDefault(),l(d);break}};return s.jsxs("li",{id:t,role:"option","aria-selected":a,tabIndex:0,onKeyDown:r(t),onClick:()=>l(t),className:o,children:[a?s.jsx(Y,{}):s.jsx(Z,{}),s.jsx("span",{children:n})]})};try{w.displayName="MultiSelectOption",w.__docgenInfo={description:"",displayName:"MultiSelectOption",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"MultiSelectValue"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}}}}}catch(e){}const j=({options:e,opened:l,onClose:t,onSelect:n,dropdownId:a})=>{const o=N([R.dropdown,{[R.dropdown__opened]:l}]);return s.jsx("ul",{role:"listbox",id:a,tabIndex:-1,onKeyDown:r=>J({e:r,options:e,onClose:t}),className:o,children:e.map(r=>s.jsx(w,{value:r,onSelect:()=>n(r.id)},r.id))})};try{j.displayName="MultiSelectDropdown",j.__docgenInfo={description:"",displayName:"MultiSelectDropdown",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"MultiSelectValue[]"}},opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}}}}}catch(e){}const L=y=>{var m=y,{options:e,name:l,label:t,required:n=!1,placeholder:a="Not selected",disabled:o=!1,onChange:r,defaultValue:d,id:u,className:p}=m,i=K(m,["options","name","label","required","placeholder","disabled","onChange","defaultValue","id","className"]);const b=c.useRef(null),{elementId:S,dropdownId:g}=H(u),{handleClose:_,handleSelect:f,handleToggle:x,opened:k,values:v}=re({name:l,options:e,defaultValue:d,onChange:r}),P=N([Q.wrapper,p]);return B({ref:b,onClickOutsideHandler:_}),z({keyCode:"Escape",ref:b,onKeyPress:_}),s.jsxs("div",q(V({ref:b},i),{className:P,children:[s.jsx(T,{label:t,required:n,inputId:S}),s.jsx(M,{name:l,opened:k,comboboxId:S,dropdownId:g,onClick:x,values:v,placeholder:a,disabled:o,required:n}),s.jsx(j,{options:v,opened:k,onClose:_,dropdownId:g,onSelect:f})]}))};try{L.displayName="MultiSelect",L.__docgenInfo={description:"",displayName:"MultiSelect",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectValue[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((values?: SelectValue[]) => void)"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number | readonly string[]"}},placeholder:{defaultValue:{value:"Not selected"},description:"",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},stateless:{defaultValue:null,description:"",name:"stateless",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | number | readonly string[]"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch(e){}export{L as M};
