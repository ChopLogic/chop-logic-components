import{r as p,C as M,j as g}from"./iframe-CcStb-xO.js";import"./EditableText-q3k3r0Uc.js";import{c as v,C as I}from"./Header-BiTp834B.js";import"./Icon-wNEFAMcc.js";import"./Loader-BhAQqttu.js";import"./Portal-CahqD_2f.js";import{u as V}from"./use-click-outside-BOHE6JV_.js";import{u as N}from"./use-key-press-BYb-T9_a.js";import{g as _}from"./get-class-name-CHDn80c0.js";import{M as L,a as j}from"./Dropdown-B9vQZ4D_.js";import{s as k}from"./Select.module-DHd5GItA.js";import{u as w}from"./use-reset-form-input-BKI7i7oO.js";function A({name:t,options:l,initialValues:e,defaultValue:s}){return l.map(d=>{let o=!1;return e&&(e!=null&&e[t])&&Array.isArray(e[t])&&e[t].find(a=>a===d.id||(a==null?void 0:a.id)===d.id)&&(o=!0),!(e!=null&&e[t])&&Array.isArray(s)&&s.find(a=>a===d.id)&&(o=!0),{...d,selected:o}})}const x=t=>t.filter(l=>l.selected).map(l=>l.id),E=(t,l)=>{const e=t.find(s=>s.id===l);return t.map(s=>s.id===l?{...s,selected:!(e!=null&&e.selected)}:s)};function O({name:t,defaultValue:l,onChange:e,options:s}){const[d,o]=p.useState(!1),{onChangeFormInput:r,initialValues:a}=p.useContext(M),n=A({name:t,options:s,initialValues:a,defaultValue:l}),[f,m]=p.useState(n),u=()=>o(!1),y=()=>o(!d),S=C=>{const i=E(f,C);m(i),e==null||e(i),r==null||r({name:t,value:x(i)})},c=p.useCallback(()=>{o(!1),m(n),r==null||r({name:t,value:x(n)})},[t]);return w(c),{handleClose:u,handleToggle:y,handleSelect:S,opened:d,values:f}}const Q=({options:t,name:l,label:e,required:s=!1,placeholder:d="Not selected",disabled:o=!1,onChange:r,defaultValue:a,id:n,className:f,...m})=>{const u=p.useRef(null),{elementId:y,dropdownId:S}=v(n),{handleClose:c,handleSelect:C,handleToggle:i,opened:b,values:q}=O({name:l,options:t,defaultValue:a,onChange:r}),h=_([k.wrapper,f]);return V({ref:u,onClickOutsideHandler:c}),N({keyCode:"Escape",ref:u,onKeyPress:c}),g.jsxs("div",{ref:u,...m,className:h,children:[g.jsx(I,{label:e,required:s,inputId:y}),g.jsx(L,{name:l,opened:b,comboboxId:y,dropdownId:S,onClick:i,values:q,placeholder:d,disabled:o,required:s}),g.jsx(j,{options:q,opened:b,onClose:c,dropdownId:S,onSelect:C})]})};try{MultiSelect.displayName="MultiSelect",MultiSelect.__docgenInfo={description:"",displayName:"MultiSelect",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"ChopLogicSelectValue[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((values?: ChopLogicSelectValue[]) => void)"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number | readonly string[]"}},placeholder:{defaultValue:{value:"Not selected"},description:"",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch{}export{Q as C};
