var R=Object.defineProperty,$=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var N=(e,l,t)=>l in e?R(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,h=(e,l)=>{for(var t in l||(l={}))k.call(l,t)&&N(e,t,l[t]);if(S)for(var t of S(l))D.call(l,t)&&N(e,t,l[t]);return e},q=(e,l)=>$(e,U(l));var A=(e,l)=>{var t={};for(var n in e)k.call(e,n)&&l.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&S)for(var n of S(e))l.indexOf(n)<0&&D.call(e,n)&&(t[n]=e[n]);return t};import{j as d,r as b}from"./iframe-DGLPjSHb.js";import{L as T}from"./Label-rlm6Xgpz.js";import{u as B}from"./use-click-outside-CQdVQ-mQ.js";import{u as F}from"./use-element-ids-CCLjb5t5.js";import{u as H}from"./use-key-press-q-IucPbH.js";import{g as w}from"./get-class-name-CHDn80c0.js";import{s as z,a as g,b as v,h as G,c as J}from"./Option.module-DFJDMC66.js";import{A as Q,b as W,C as X,c as Y}from"./Icon-Coy0pRmj.js";import{F as Z,u as ee}from"./use-reset-form-input-D9nhGyE4.js";const V=({opened:e,onClick:l,comboboxId:t,dropdownId:n,name:s,placeholder:o,disabled:r,required:i,values:a})=>{const u=a==null?void 0:a.filter(c=>c.selected).map(c=>c.label),f=a==null?void 0:a.filter(c=>c.selected).map(c=>c.id);let p=d.jsx("span",{children:o});return u&&u.length===(a==null?void 0:a.length)?p=d.jsx("span",{children:"All items selected"}):u&&u.length===1?p=d.jsx("span",{children:u[0]}):u&&u.length>1&&(p=d.jsx("span",{children:`${u.length} items selected`})),d.jsxs("button",{type:"button",name:s,value:f,role:"combobox","aria-haspopup":"listbox","aria-expanded":e,"aria-controls":n,id:t,onClick:l,disabled:r,"aria-required":i,className:z.combobox,children:[p,e?d.jsx(Q,{}):d.jsx(W,{})]})};try{V.displayName="MultiSelectCombobox",V.__docgenInfo={description:"",displayName:"MultiSelectCombobox",props:{opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},required:{defaultValue:null,description:"",name:"required",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},comboboxId:{defaultValue:null,description:"",name:"comboboxId",required:!0,type:{name:"string"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"MultiSelectValue[]"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}}}catch(e){}function te({name:e,options:l,initialValues:t,defaultValue:n}){return l.map(s=>{let o=!1;return t!=null&&t[e]&&Array.isArray(t[e])&&t[e].find(i=>i===s.id||(i==null?void 0:i.id)===s.id)&&(o=!0),!(t!=null&&t[e])&&Array.isArray(n)&&n.find(i=>i===s.id)&&(o=!0),q(h({},s),{selected:o})})}const O=e=>e.filter(l=>l.selected).map(l=>l.id),le=(e,l)=>{const t=e.find(n=>n.id===l);return e.map(n=>n.id===l?q(h({},n),{selected:!(t!=null&&t.selected)}):n)};function ne({name:e,defaultValue:l,onChange:t,options:n}){const[s,o]=b.useState(!1),{onChangeFormInput:r,initialValues:i}=b.useContext(Z),a=te({name:e,options:n,initialValues:i,defaultValue:l}),[u,f]=b.useState(a),p=()=>o(!1),c=()=>o(!s),y=_=>{const m=le(u,_);f(m),t==null||t(m),r==null||r({name:e,value:O(m)})},x=b.useCallback(()=>{o(!1),f(a),r==null||r({name:e,value:O(a)})},[e]);return ee(x),{handleClose:p,handleToggle:c,handleSelect:y,opened:s,values:u}}const I=({value:e,onSelect:l})=>{const{id:t,label:n,selected:s}=e,o=w([g.option,g.option__multi,{[g.option__selected]:s}]),r=i=>a=>{switch(a.key){case" ":case"SpaceBar":case"Enter":a.preventDefault(),l(i);break}};return d.jsxs("li",{id:t,role:"option","aria-selected":s,tabIndex:0,onKeyDown:r(t),onClick:()=>l(t),className:o,children:[s?d.jsx(X,{}):d.jsx(Y,{}),d.jsx("span",{children:n})]})};try{I.displayName="MultiSelectOption",I.__docgenInfo={description:"",displayName:"MultiSelectOption",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"MultiSelectValue"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}}}}}catch(e){}const C=({options:e,opened:l,onClose:t,onSelect:n,dropdownId:s})=>{const o=w([v.dropdown,{[v.dropdown__opened]:l}]);return d.jsx("ul",{role:"listbox",id:s,tabIndex:-1,onKeyDown:r=>G({e:r,options:e,onClose:t}),className:o,children:e.map(r=>d.jsx(I,{value:r,onSelect:()=>n(r.id)},r.id))})};try{C.displayName="MultiSelectDropdown",C.__docgenInfo={description:"",displayName:"MultiSelectDropdown",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"MultiSelectValue[]"}},opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}}}}}catch(e){}const K=p=>{var c=p,{options:e,name:l,label:t,required:n=!1,placeholder:s="Not selected",disabled:o=!1,onChange:r,defaultValue:i,id:a,className:u}=c,f=A(c,["options","name","label","required","placeholder","disabled","onChange","defaultValue","id","className"]);const y=b.useRef(null),{elementId:x,dropdownId:_}=F(a),{handleClose:m,handleSelect:E,handleToggle:L,opened:M,values:j}=ne({name:l,options:e,defaultValue:i,onChange:r}),P=w([J.wrapper,u]);return B({ref:y,onClickOutsideHandler:m}),H({keyCode:"Escape",ref:y,onKeyPress:m}),d.jsxs("div",q(h({ref:y},f),{className:P,children:[d.jsx(T,{label:t,required:n,inputId:x}),d.jsx(V,{name:l,opened:M,comboboxId:x,dropdownId:_,onClick:L,values:j,placeholder:s,disabled:o,required:n}),d.jsx(C,{options:j,opened:M,onClose:m,dropdownId:_,onSelect:E})]}))};try{K.displayName="MultiSelect",K.__docgenInfo={description:"",displayName:"MultiSelect",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectValue[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((values?: SelectValue[]) => void)"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number | readonly string[]"}},placeholder:{defaultValue:{value:"Not selected"},description:"",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch(e){}export{K as M};
