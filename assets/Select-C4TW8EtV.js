var $=Object.defineProperty,B=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var N=(e,a,l)=>a in e?$(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,D=(e,a)=>{for(var l in a||(a={}))j.call(a,l)&&N(e,l,a[l]);if(x)for(var l of x(a))k.call(a,l)&&N(e,l,a[l]);return e},O=(e,a)=>B(e,T(a));var E=(e,a)=>{var l={};for(var r in e)j.call(e,r)&&a.indexOf(r)<0&&(l[r]=e[r]);if(e!=null&&x)for(var r of x(e))a.indexOf(r)<0&&k.call(e,r)&&(l[r]=e[r]);return l};import{j as s,r as y}from"./iframe-DldSfwU-.js";import{L as F}from"./Label-bYYRV1Qt.js";import{u as H}from"./use-click-outside-CeFGhHVU.js";import{u as M}from"./use-element-ids-DZYbu-Ny.js";import{u as U}from"./use-key-press-Bs6P8e37.js";import{g}from"./get-class-name-CHDn80c0.js";import{A as z,a as G}from"./ArrowUpIcon-D0Ja-nwN.js";import{s as J,a as K,b as P,h as Q,c as W}from"./Option.module-CzGdr06F.js";import{m as X}from"./move-focus-on-element-by-id-CpbS-38o.js";import{C as Y}from"./CheckMarkIcon-2AL8oS8v.js";import{F as Z,u as ee}from"./use-reset-form-input-BmkIARUa.js";const V=({opened:e,onClick:a,comboboxId:l,dropdownId:r,selected:t,name:i,placeholder:n,disabled:d,required:u})=>s.jsxs("button",{type:"button",name:i,value:t==null?void 0:t.id,role:"combobox","aria-haspopup":"listbox","aria-expanded":e,"aria-controls":r,id:l,onClick:a,disabled:d,"aria-required":u,className:J.combobox,children:[t!=null&&t.label?s.jsx("span",{children:t==null?void 0:t.label}):s.jsx("span",{children:n}),e?s.jsx(z,{}):s.jsx(G,{})]});try{V.displayName="SelectCombobox",V.__docgenInfo={description:"",displayName:"SelectCombobox",props:{opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},required:{defaultValue:null,description:"",name:"required",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},comboboxId:{defaultValue:null,description:"",name:"comboboxId",required:!0,type:{name:"string"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"SelectValue"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}}}catch(e){}const I=({value:e,selected:a,onSelect:l,onClear:r})=>{const{id:t,label:i}=e,n=g([K.option,{[K.option__selected]:a}]),d=p=>{a?r():l(p)},u=p=>o=>{switch(o.key){case" ":case"SpaceBar":case"Enter":o.preventDefault(),d(p);break}};return s.jsxs("li",{id:t,role:"option","aria-selected":a,tabIndex:0,onKeyDown:u(t),onClick:()=>d(t),className:n,children:[s.jsx("span",{children:i}),a&&s.jsx(Y,{})]})};try{I.displayName="SelectOption",I.__docgenInfo={description:"",displayName:"SelectOption",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"SelectValue"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!0,type:{name:"() => void"}}}}}catch(e){}const v=({options:e,opened:a,onClose:l,onSelect:r,dropdownId:t,comboboxId:i,selected:n,onClear:d})=>{const u=o=>{r(o),l(),X(i)},p=g([P.dropdown,{[P.dropdown__opened]:a}]);return s.jsx("ul",{role:"listbox",id:t,tabIndex:-1,onKeyDown:o=>Q({e:o,options:e,onClose:l}),className:p,children:e.map(o=>s.jsx(I,{value:o,onSelect:()=>u(o.id),onClear:d,selected:o.id===(n==null?void 0:n.id)},o.id))})};try{v.displayName="SelectDropdown",v.__docgenInfo={description:"",displayName:"SelectDropdown",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectValue[]"}},opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},comboboxId:{defaultValue:null,description:"",name:"comboboxId",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"SelectValue"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!0,type:{name:"() => void"}}}}}catch(e){}function le({name:e,options:a,initialValues:l,defaultValue:r}){var i,n;let t;return l&&l[e]&&(t=(n=(i=l[e])==null?void 0:i.id)!=null?n:l[e]),!(l!=null&&l[e])&&r&&typeof r=="string"&&(t=r),a.find(d=>d.id===t)}function ae({name:e,defaultValue:a,onChange:l,options:r}){const{onChangeFormInput:t,initialValues:i}=y.useContext(Z),n=le({name:e,options:r,defaultValue:a,initialValues:i}),[d,u]=y.useState(!1),[p,o]=y.useState(n),h=()=>u(!1),b=()=>u(!d),m=S=>{const c=r.find(_=>_.id===S);o(c),l==null||l(c),t==null||t({name:e,value:c==null?void 0:c.id})},f=()=>{o(void 0),l==null||l(void 0)},q=y.useCallback(()=>{u(!1),o(n),t==null||t({name:e,value:n==null?void 0:n.id})},[e]);return ee(q),{selected:p,opened:d,handleClear:f,handleClose:h,handleToggle:b,handleSelect:m}}const R=h=>{var b=h,{options:e,onChange:a,name:l,label:r,defaultValue:t,id:i,placeholder:n="Not selected",required:d=!1,disabled:u=!1,className:p}=b,o=E(b,["options","onChange","name","label","defaultValue","id","placeholder","required","disabled","className"]);const m=y.useRef(null),{elementId:f,dropdownId:q}=M(i),{handleClear:S,handleClose:c,handleSelect:_,handleToggle:A,selected:C,opened:w}=ae({options:e,onChange:a,defaultValue:t,name:l}),L=g([W.wrapper,p]);return H({ref:m,onClickOutsideHandler:c}),U({keyCode:"Escape",ref:m,onKeyPress:c}),s.jsxs("div",O(D({ref:m},o),{className:L,children:[s.jsx(F,{label:r,required:d,inputId:f}),s.jsx(V,{name:l,opened:w,comboboxId:f,dropdownId:q,onClick:A,selected:C,placeholder:n,disabled:u,required:d}),s.jsx(v,{options:e,selected:C,opened:w,onClose:c,dropdownId:q,comboboxId:f,onSelect:_,onClear:S})]}))};try{R.displayName="Select",R.__docgenInfo={description:"",displayName:"Select",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectValue[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value?: SelectValue) => void)"}},placeholder:{defaultValue:{value:"Not selected"},description:"",name:"placeholder",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number | readonly string[]"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch(e){}export{R as S};
