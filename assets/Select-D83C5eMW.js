import{j as d,r as m}from"./iframe-DP4TfwvB.js";import{L as O}from"./Label-GsN7KfjG.js";import{u as D}from"./use-click-outside-yBZhbwYK.js";import{u as E}from"./use-element-ids-BwRwfIW9.js";import{u as R}from"./use-key-press-Qz_3YznQ.js";import{g as S}from"./get-class-name-BY88G7uf.js";import{h as F}from"./Option-CTSW_nAD.js";import{I as N,E as j}from"./Icon-DgdWz_xl.js";import{I as k}from"./icon-name-DofyCo9k.js";import{m as K}from"./move-focus-on-element-by-id-CpbS-38o.js";import{F as P,u as z}from"./use-reset-form-input-CGOMNfpm.js";const C=({opened:e,onClick:a,comboboxId:n,dropdownId:r,selected:l,name:o,placeholder:i,disabled:s,required:u})=>{const c=S(["cl-select-combobox__icon",{"cl-select-combobox__icon_opened":e}]);return d.jsxs("button",{type:"button",name:o,value:l?.id,role:"combobox","aria-haspopup":"listbox","aria-expanded":e,"aria-controls":r,id:n,onClick:a,disabled:s,"aria-required":u,className:"cl-select-combobox",children:[l?.label?d.jsx("span",{children:l?.label}):d.jsx("span",{children:i}),d.jsx(N,{name:k.ChevronDown,className:c,size:j.Small})]})};try{C.displayName="SelectCombobox",C.__docgenInfo={description:"",displayName:"SelectCombobox",props:{opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},required:{defaultValue:null,description:"",name:"required",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},comboboxId:{defaultValue:null,description:"",name:"comboboxId",required:!0,type:{name:"string"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"SelectValue"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}}}catch{}const I=({value:e,selected:a,onSelect:n,onClear:r})=>{const{id:l,label:o}=e,i=S(["cl-select-option",{"cl-select-option_selected":a}]),s=c=>{a?r():n(c)},u=c=>t=>{switch(t.key){case" ":case"SpaceBar":case"Enter":t.preventDefault(),s(c);break}};return d.jsxs("li",{id:l,role:"option","aria-selected":a,tabIndex:0,onKeyDown:u(l),onClick:()=>s(l),className:i,children:[d.jsx("span",{children:o}),a&&d.jsx(N,{name:k.Check,size:j.Small})]})};try{I.displayName="SelectOption",I.__docgenInfo={description:"",displayName:"SelectOption",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"SelectValue"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!0,type:{name:"() => void"}}}}}catch{}const v=({options:e,opened:a,onClose:n,onSelect:r,dropdownId:l,comboboxId:o,selected:i,onClear:s})=>{const u=t=>{r(t),n(),K(o)},c=S(["cl-select-dropdown",{"cl-select-dropdown_opened":a}]);return d.jsx("ul",{role:"listbox",id:l,tabIndex:-1,onKeyDown:t=>F({e:t,options:e,onClose:n}),className:c,children:e.map(t=>d.jsx(I,{value:t,onSelect:()=>u(t.id),onClear:s,selected:t.id===i?.id},t.id))})};try{v.displayName="SelectDropdown",v.__docgenInfo={description:"",displayName:"SelectDropdown",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectValue[]"}},opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},comboboxId:{defaultValue:null,description:"",name:"comboboxId",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"SelectValue"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!0,type:{name:"() => void"}}}}}catch{}function L({name:e,options:a,initialValues:n,defaultValue:r}){let l;if(n&&Object.hasOwn(n,e)){const o=n[e];l=o?.id??o}return!n?.[e]&&r&&typeof r=="string"&&(l=r),a.find(o=>o.id===l)}function B({name:e,defaultValue:a,onChange:n,options:r}){const{onChangeFormInput:l,initialValues:o}=m.useContext(P),i=L({name:e,options:r,defaultValue:a,initialValues:o}),[s,u]=m.useState(!1),[c,t]=m.useState(i),f=m.useRef(l),p=m.useRef(i);f.current=l,p.current=i;const V=()=>u(!1),x=()=>u(!s),b=q=>{const y=r.find(h=>h.id===q);t(y),n?.(y),l?.({name:e,value:y?.id})},_=()=>{t(void 0),n?.(void 0)},g=m.useCallback(()=>{u(!1),t(p.current),f.current?.({name:e,value:p.current?.id})},[e]);return z(g),{selected:c,opened:s,handleClear:_,handleClose:V,handleToggle:x,handleSelect:b}}const w=({options:e,onChange:a,name:n,label:r,defaultValue:l,id:o,placeholder:i="Not selected",required:s=!1,disabled:u=!1,className:c,...t})=>{const f=m.useRef(null),{elementId:p,dropdownId:V}=E(o),{handleClear:x,handleClose:b,handleSelect:_,handleToggle:g,selected:q,opened:y}=B({options:e,onChange:a,defaultValue:l,name:n}),h=S(["cl-select",c]);return D({ref:f,onClickOutsideHandler:b}),R({keyCode:"Escape",ref:f,onKeyPress:b}),d.jsxs("div",{ref:f,...t,className:h,children:[d.jsx(O,{label:r,required:s,inputId:p}),d.jsx(C,{name:n,opened:y,comboboxId:p,dropdownId:V,onClick:g,selected:q,placeholder:i,disabled:u,required:s}),d.jsx(v,{options:e,selected:q,opened:y,onClose:b,dropdownId:V,comboboxId:p,onSelect:_,onClear:x})]})};try{w.displayName="Select",w.__docgenInfo={description:"",displayName:"Select",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectValue[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value?: SelectValue) => void)"}},placeholder:{defaultValue:{value:"Not selected"},description:"",name:"placeholder",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number | readonly string[]"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},stateless:{defaultValue:null,description:"",name:"stateless",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | number | readonly string[]"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch{}export{w as S};
