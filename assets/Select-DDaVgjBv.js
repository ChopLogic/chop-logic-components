var $=Object.defineProperty,B=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var j=(e,a,l)=>a in e?$(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,O=(e,a)=>{for(var l in a||(a={}))N.call(a,l)&&j(e,l,a[l]);if(x)for(var l of x(a))k.call(a,l)&&j(e,l,a[l]);return e},D=(e,a)=>B(e,T(a));var E=(e,a)=>{var l={};for(var r in e)N.call(e,r)&&a.indexOf(r)<0&&(l[r]=e[r]);if(e!=null&&x)for(var r of x(e))a.indexOf(r)<0&&k.call(e,r)&&(l[r]=e[r]);return l};import{j as d,r as y}from"./iframe-hahURQ28.js";import{L as F}from"./Label-ClbJe1Re.js";import{u as H}from"./use-click-outside-DwqNkqzJ.js";import{u as M}from"./use-element-ids-DEp1f2qo.js";import{u as U}from"./use-key-press-BNGOKtdQ.js";import{g}from"./get-class-name-CHDn80c0.js";import{A as z,b as G,d as J}from"./Icon-CYZu_F5m.js";import{s as Q,a as K,b as P,h as W,c as X}from"./Option.module-CzGdr06F.js";import{m as Y}from"./move-focus-on-element-by-id-CpbS-38o.js";import{F as Z,u as ee}from"./use-reset-form-input-DzoEa7g8.js";const V=({opened:e,onClick:a,comboboxId:l,dropdownId:r,selected:t,name:s,placeholder:n,disabled:i,required:u})=>d.jsxs("button",{type:"button",name:s,value:t==null?void 0:t.id,role:"combobox","aria-haspopup":"listbox","aria-expanded":e,"aria-controls":r,id:l,onClick:a,disabled:i,"aria-required":u,className:Q.combobox,children:[t!=null&&t.label?d.jsx("span",{children:t==null?void 0:t.label}):d.jsx("span",{children:n}),e?d.jsx(z,{}):d.jsx(G,{})]});try{V.displayName="SelectCombobox",V.__docgenInfo={description:"",displayName:"SelectCombobox",props:{opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},required:{defaultValue:null,description:"",name:"required",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},comboboxId:{defaultValue:null,description:"",name:"comboboxId",required:!0,type:{name:"string"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"SelectValue"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}}}catch(e){}const I=({value:e,selected:a,onSelect:l,onClear:r})=>{const{id:t,label:s}=e,n=g([K.option,{[K.option__selected]:a}]),i=c=>{a?r():l(c)},u=c=>o=>{switch(o.key){case" ":case"SpaceBar":case"Enter":o.preventDefault(),i(c);break}};return d.jsxs("li",{id:t,role:"option","aria-selected":a,tabIndex:0,onKeyDown:u(t),onClick:()=>i(t),className:n,children:[d.jsx("span",{children:s}),a&&d.jsx(J,{})]})};try{I.displayName="SelectOption",I.__docgenInfo={description:"",displayName:"SelectOption",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"SelectValue"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!0,type:{name:"() => void"}}}}}catch(e){}const h=({options:e,opened:a,onClose:l,onSelect:r,dropdownId:t,comboboxId:s,selected:n,onClear:i})=>{const u=o=>{r(o),l(),Y(s)},c=g([P.dropdown,{[P.dropdown__opened]:a}]);return d.jsx("ul",{role:"listbox",id:t,tabIndex:-1,onKeyDown:o=>W({e:o,options:e,onClose:l}),className:c,children:e.map(o=>d.jsx(I,{value:o,onSelect:()=>u(o.id),onClear:i,selected:o.id===(n==null?void 0:n.id)},o.id))})};try{h.displayName="SelectDropdown",h.__docgenInfo={description:"",displayName:"SelectDropdown",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectValue[]"}},opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},comboboxId:{defaultValue:null,description:"",name:"comboboxId",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"SelectValue"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!0,type:{name:"() => void"}}}}}catch(e){}function le({name:e,options:a,initialValues:l,defaultValue:r}){var s;let t;if(l&&Object.prototype.hasOwnProperty.call(l,e)){const n=l[e];t=(s=n==null?void 0:n.id)!=null?s:n}return!(l!=null&&l[e])&&r&&typeof r=="string"&&(t=r),a.find(n=>n.id===t)}function ae({name:e,defaultValue:a,onChange:l,options:r}){const{onChangeFormInput:t,initialValues:s}=y.useContext(Z),n=le({name:e,options:r,defaultValue:a,initialValues:s}),[i,u]=y.useState(!1),[c,o]=y.useState(n),v=()=>u(!1),b=()=>u(!i),m=S=>{const p=r.find(_=>_.id===S);o(p),l==null||l(p),t==null||t({name:e,value:p==null?void 0:p.id})},f=()=>{o(void 0),l==null||l(void 0)},q=y.useCallback(()=>{u(!1),o(n),t==null||t({name:e,value:n==null?void 0:n.id})},[e]);return ee(q),{selected:c,opened:i,handleClear:f,handleClose:v,handleToggle:b,handleSelect:m}}const R=v=>{var b=v,{options:e,onChange:a,name:l,label:r,defaultValue:t,id:s,placeholder:n="Not selected",required:i=!1,disabled:u=!1,className:c}=b,o=E(b,["options","onChange","name","label","defaultValue","id","placeholder","required","disabled","className"]);const m=y.useRef(null),{elementId:f,dropdownId:q}=M(s),{handleClear:S,handleClose:p,handleSelect:_,handleToggle:A,selected:C,opened:w}=ae({options:e,onChange:a,defaultValue:t,name:l}),L=g([X.wrapper,c]);return H({ref:m,onClickOutsideHandler:p}),U({keyCode:"Escape",ref:m,onKeyPress:p}),d.jsxs("div",D(O({ref:m},o),{className:L,children:[d.jsx(F,{label:r,required:i,inputId:f}),d.jsx(V,{name:l,opened:w,comboboxId:f,dropdownId:q,onClick:A,selected:C,placeholder:n,disabled:u,required:i}),d.jsx(h,{options:e,selected:C,opened:w,onClose:p,dropdownId:q,comboboxId:f,onSelect:_,onClear:S})]}))};try{R.displayName="Select",R.__docgenInfo={description:"",displayName:"Select",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectValue[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value?: SelectValue) => void)"}},placeholder:{defaultValue:{value:"Not selected"},description:"",name:"placeholder",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number | readonly string[]"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch(e){}export{R as S};
