var $=Object.defineProperty,B=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var N=(e,a,l)=>a in e?$(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,D=(e,a)=>{for(var l in a||(a={}))k.call(a,l)&&N(e,l,a[l]);if(I)for(var l of I(a))O.call(a,l)&&N(e,l,a[l]);return e},E=(e,a)=>B(e,F(a));var K=(e,a)=>{var l={};for(var n in e)k.call(e,n)&&a.indexOf(n)<0&&(l[n]=e[n]);if(e!=null&&I)for(var n of I(e))a.indexOf(n)<0&&O.call(e,n)&&(l[n]=e[n]);return l};import{j as d,r as m}from"./iframe-ByKzMmaK.js";import{L as T}from"./Label-DQdSVFEl.js";import{u as H}from"./use-click-outside-DREiv8zp.js";import{u as M}from"./use-element-ids-CshNHWkw.js";import{u as U}from"./use-key-press-B_vXJT53.js";import{g as w}from"./get-class-name-BY88G7uf.js";import{A as z,b as G,C as J}from"./Icon-BZD9s1Z_.js";import{s as Q,a as R,b as P,h as W,c as X}from"./Option.module-CTReddGl.js";import{m as Y}from"./move-focus-on-element-by-id-CpbS-38o.js";import{F as Z,u as ee}from"./use-reset-form-input-DpBZcUfi.js";const h=({opened:e,onClick:a,comboboxId:l,dropdownId:n,selected:t,name:s,placeholder:r,disabled:i,required:u})=>d.jsxs("button",{type:"button",name:s,value:t==null?void 0:t.id,role:"combobox","aria-haspopup":"listbox","aria-expanded":e,"aria-controls":n,id:l,onClick:a,disabled:i,"aria-required":u,className:Q.combobox,children:[t!=null&&t.label?d.jsx("span",{children:t==null?void 0:t.label}):d.jsx("span",{children:r}),e?d.jsx(z,{}):d.jsx(G,{})]});try{h.displayName="SelectCombobox",h.__docgenInfo={description:"",displayName:"SelectCombobox",props:{opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},required:{defaultValue:null,description:"",name:"required",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},comboboxId:{defaultValue:null,description:"",name:"comboboxId",required:!0,type:{name:"string"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"SelectValue"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}}}catch(e){}const v=({value:e,selected:a,onSelect:l,onClear:n})=>{const{id:t,label:s}=e,r=w([R.option,{[R.option__selected]:a}]),i=p=>{a?n():l(p)},u=p=>o=>{switch(o.key){case" ":case"SpaceBar":case"Enter":o.preventDefault(),i(p);break}};return d.jsxs("li",{id:t,role:"option","aria-selected":a,tabIndex:0,onKeyDown:u(t),onClick:()=>i(t),className:r,children:[d.jsx("span",{children:s}),a&&d.jsx(J,{})]})};try{v.displayName="SelectOption",v.__docgenInfo={description:"",displayName:"SelectOption",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"SelectValue"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!0,type:{name:"() => void"}}}}}catch(e){}const C=({options:e,opened:a,onClose:l,onSelect:n,dropdownId:t,comboboxId:s,selected:r,onClear:i})=>{const u=o=>{n(o),l(),Y(s)},p=w([P.dropdown,{[P.dropdown__opened]:a}]);return d.jsx("ul",{role:"listbox",id:t,tabIndex:-1,onKeyDown:o=>W({e:o,options:e,onClose:l}),className:p,children:e.map(o=>d.jsx(v,{value:o,onSelect:()=>u(o.id),onClear:i,selected:o.id===(r==null?void 0:r.id)},o.id))})};try{C.displayName="SelectDropdown",C.__docgenInfo={description:"",displayName:"SelectDropdown",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectValue[]"}},opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},comboboxId:{defaultValue:null,description:"",name:"comboboxId",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"SelectValue"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!0,type:{name:"() => void"}}}}}catch(e){}function le({name:e,options:a,initialValues:l,defaultValue:n}){var s;let t;if(l&&Object.hasOwn(l,e)){const r=l[e];t=(s=r==null?void 0:r.id)!=null?s:r}return!(l!=null&&l[e])&&n&&typeof n=="string"&&(t=n),a.find(r=>r.id===t)}function ae({name:e,defaultValue:a,onChange:l,options:n}){const{onChangeFormInput:t,initialValues:s}=m.useContext(Z),r=le({name:e,options:n,defaultValue:a,initialValues:s}),[i,u]=m.useState(!1),[p,o]=m.useState(r),b=m.useRef(t),f=m.useRef(r);b.current=t,f.current=r;const q=()=>u(!1),x=()=>u(!i),S=y=>{const c=n.find(_=>_.id===y);o(c),l==null||l(c),t==null||t({name:e,value:c==null?void 0:c.id})},g=()=>{o(void 0),l==null||l(void 0)},V=m.useCallback(()=>{var y,c;u(!1),o(f.current),(c=b.current)==null||c.call(b,{name:e,value:(y=f.current)==null?void 0:y.id})},[e]);return ee(V),{selected:p,opened:i,handleClear:g,handleClose:q,handleToggle:x,handleSelect:S}}const A=b=>{var f=b,{options:e,onChange:a,name:l,label:n,defaultValue:t,id:s,placeholder:r="Not selected",required:i=!1,disabled:u=!1,className:p}=f,o=K(f,["options","onChange","name","label","defaultValue","id","placeholder","required","disabled","className"]);const q=m.useRef(null),{elementId:x,dropdownId:S}=M(s),{handleClear:g,handleClose:V,handleSelect:y,handleToggle:c,selected:_,opened:j}=ae({options:e,onChange:a,defaultValue:t,name:l}),L=w([X.wrapper,p]);return H({ref:q,onClickOutsideHandler:V}),U({keyCode:"Escape",ref:q,onKeyPress:V}),d.jsxs("div",E(D({ref:q},o),{className:L,children:[d.jsx(T,{label:n,required:i,inputId:x}),d.jsx(h,{name:l,opened:j,comboboxId:x,dropdownId:S,onClick:c,selected:_,placeholder:r,disabled:u,required:i}),d.jsx(C,{options:e,selected:_,opened:j,onClose:V,dropdownId:S,comboboxId:x,onSelect:y,onClear:g})]}))};try{A.displayName="Select",A.__docgenInfo={description:"",displayName:"Select",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectValue[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value?: SelectValue) => void)"}},placeholder:{defaultValue:{value:"Not selected"},description:"",name:"placeholder",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number | readonly string[]"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},stateless:{defaultValue:null,description:"",name:"stateless",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | number | readonly string[]"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch(e){}export{A as S};
