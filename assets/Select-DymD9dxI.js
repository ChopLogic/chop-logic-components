var $=Object.defineProperty,B=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var N=(e,t,l)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,D=(e,t)=>{for(var l in t||(t={}))k.call(t,l)&&N(e,l,t[l]);if(I)for(var l of I(t))O.call(t,l)&&N(e,l,t[l]);return e},E=(e,t)=>B(e,F(t));var K=(e,t)=>{var l={};for(var n in e)k.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(e!=null&&I)for(var n of I(e))t.indexOf(n)<0&&O.call(e,n)&&(l[n]=e[n]);return l};import{j as d,r as m}from"./iframe-C2ng--48.js";import{L as T}from"./Label-CDF7_cDo.js";import{u as H}from"./use-click-outside-DnwnfP2B.js";import{u as M}from"./use-element-ids-DvdSYpiS.js";import{u as U}from"./use-key-press-CdtK2Nxf.js";import{g as w}from"./get-class-name-BY88G7uf.js";import{A as z,b as G,C as J}from"./Icon-Fv1_a00z.js";import{s as Q,a as R,b as P,h as W,c as X}from"./Option.module-CTReddGl.js";import{m as Y}from"./move-focus-on-element-by-id-CpbS-38o.js";import{F as Z,u as ee}from"./use-reset-form-input-DKGo7m18.js";const g=({opened:e,onClick:t,comboboxId:l,dropdownId:n,selected:a,name:s,placeholder:r,disabled:i,required:u})=>d.jsxs("button",{type:"button",name:s,value:a==null?void 0:a.id,role:"combobox","aria-haspopup":"listbox","aria-expanded":e,"aria-controls":n,id:l,onClick:t,disabled:i,"aria-required":u,className:Q.combobox,children:[a!=null&&a.label?d.jsx("span",{children:a==null?void 0:a.label}):d.jsx("span",{children:r}),e?d.jsx(z,{}):d.jsx(G,{})]});try{g.displayName="SelectCombobox",g.__docgenInfo={description:"",displayName:"SelectCombobox",props:{opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},required:{defaultValue:null,description:"",name:"required",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},comboboxId:{defaultValue:null,description:"",name:"comboboxId",required:!0,type:{name:"string"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"SelectValue"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}}}catch(e){}const C=({value:e,selected:t,onSelect:l,onClear:n})=>{const{id:a,label:s}=e,r=w([R.option,{[R.option__selected]:t}]),i=p=>{t?n():l(p)},u=p=>o=>{switch(o.key){case" ":case"SpaceBar":case"Enter":o.preventDefault(),i(p);break}};return d.jsxs("li",{id:a,role:"option","aria-selected":t,tabIndex:0,onKeyDown:u(a),onClick:()=>i(a),className:r,children:[d.jsx("span",{children:s}),t&&d.jsx(J,{})]})};try{C.displayName="SelectOption",C.__docgenInfo={description:"",displayName:"SelectOption",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"SelectValue"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!0,type:{name:"() => void"}}}}}catch(e){}const v=({options:e,opened:t,onClose:l,onSelect:n,dropdownId:a,comboboxId:s,selected:r,onClear:i})=>{const u=o=>{n(o),l(),Y(s)},p=w([P.dropdown,{[P.dropdown__opened]:t}]);return d.jsx("ul",{role:"listbox",id:a,tabIndex:-1,onKeyDown:o=>W({e:o,options:e,onClose:l}),className:p,children:e.map(o=>d.jsx(C,{value:o,onSelect:()=>u(o.id),onClear:i,selected:o.id===(r==null?void 0:r.id)},o.id))})};try{v.displayName="SelectDropdown",v.__docgenInfo={description:"",displayName:"SelectDropdown",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectValue[]"}},opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},comboboxId:{defaultValue:null,description:"",name:"comboboxId",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"SelectValue"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!0,type:{name:"() => void"}}}}}catch(e){}function le({name:e,options:t,initialValues:l,defaultValue:n}){var s;let a;if(l&&Object.hasOwn(l,e)){const r=l[e];a=(s=r==null?void 0:r.id)!=null?s:r}return!(l!=null&&l[e])&&n&&typeof n=="string"&&(a=n),t.find(r=>r.id===a)}function te({name:e,defaultValue:t,onChange:l,options:n}){const{onChangeFormInput:a,initialValues:s}=m.useContext(Z),r=le({name:e,options:n,defaultValue:t,initialValues:s}),[i,u]=m.useState(!1),[p,o]=m.useState(r),b=m.useRef(a),f=m.useRef(r);b.current=a,f.current=r;const q=()=>u(!1),x=()=>u(!i),V=y=>{const c=n.find(_=>_.id===y);o(c),l==null||l(c),a==null||a({name:e,value:c==null?void 0:c.id})},h=()=>{o(void 0),l==null||l(void 0)},S=m.useCallback(()=>{var y,c;u(!1),o(f.current),(c=b.current)==null||c.call(b,{name:e,value:(y=f.current)==null?void 0:y.id})},[e]);return ee(S),{selected:p,opened:i,handleClear:h,handleClose:q,handleToggle:x,handleSelect:V}}const A=b=>{var f=b,{options:e,onChange:t,name:l,label:n,defaultValue:a,id:s,placeholder:r="Not selected",required:i=!1,disabled:u=!1,className:p}=f,o=K(f,["options","onChange","name","label","defaultValue","id","placeholder","required","disabled","className"]);const q=m.useRef(null),{elementId:x,dropdownId:V}=M(s),{handleClear:h,handleClose:S,handleSelect:y,handleToggle:c,selected:_,opened:j}=te({options:e,onChange:t,defaultValue:a,name:l}),L=w([X.wrapper,p]);return H({ref:q,onClickOutsideHandler:S}),U({keyCode:"Escape",ref:q,onKeyPress:S}),d.jsxs("div",E(D({ref:q},o),{className:L,children:[d.jsx(T,{label:n,required:i,inputId:x}),d.jsx(g,{name:l,opened:j,comboboxId:x,dropdownId:V,onClick:c,selected:_,placeholder:r,disabled:u,required:i}),d.jsx(v,{options:e,selected:_,opened:j,onClose:S,dropdownId:V,comboboxId:x,onSelect:y,onClear:h})]}))};try{A.displayName="Select",A.__docgenInfo={description:"",displayName:"Select",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectValue[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value?: SelectValue) => void)"}},placeholder:{defaultValue:{value:"Not selected"},description:"",name:"placeholder",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number | readonly string[]"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch(e){}export{A as S};
