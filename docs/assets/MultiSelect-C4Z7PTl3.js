import{j as a,r as x,C as I}from"./iframe-C3nnaSfA.js";import{u as w}from"./use-click-outside-D7yaXWQH.js";import{a as j,u as N}from"./use-key-press-C9iHSrXH.js";import{A as k,d as M,b as v,c as L}from"./Icon-BBWlz8VR.js";import{s as m,h as D}from"./Select.module-4lHQ571_.js";import{g}from"./get-class-name-CHDn80c0.js";import{u as O}from"./use-reset-form-input-BoFkPjiQ.js";import{L as A}from"./Input-BHIenv_q.js";import"./Loader-C-BUGyvV.js";import"./Portal-DRzz8wUD.js";const K=({opened:e,onClick:l,comboboxId:t,dropdownId:r,name:o,placeholder:d,disabled:n,required:i,values:s})=>{const c=s==null?void 0:s.filter(u=>u.selected).map(u=>u.label),f=s==null?void 0:s.filter(u=>u.selected).map(u=>u.id);let p=a.jsx("span",{children:d});return c&&c.length>1?p=a.jsx("span",{children:`${c.length} items selected`}):c&&c.length===1&&(p=a.jsx("span",{children:c[0]})),a.jsxs("button",{type:"button",name:o,value:f,role:"combobox","aria-haspopup":"listbox","aria-expanded":e,"aria-controls":r,id:t,onClick:l,disabled:n,"aria-required":i,className:m.combobox,children:[p,e?a.jsx(k,{}):a.jsx(M,{})]})};try{Combobox.displayName="Combobox",Combobox.__docgenInfo={description:"",displayName:"Combobox",props:{opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},required:{defaultValue:null,description:"",name:"required",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},comboboxId:{defaultValue:null,description:"",name:"comboboxId",required:!0,type:{name:"string"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"ChopLogicMultiSelectValue[]"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}}}catch{}const E=({value:e,onSelect:l})=>{const{id:t,label:r,selected:o}=e,d=g([m.option,m.option__multi,{[m.option__selected]:o}]),n=i=>s=>{switch(s.key){case" ":case"SpaceBar":case"Enter":s.preventDefault(),l(i);break}};return a.jsxs("li",{id:t,role:"option","aria-selected":o,tabIndex:0,onKeyDown:n(t),onClick:()=>l(t),className:d,children:[o?a.jsx(v,{}):a.jsx(L,{}),a.jsx("span",{children:r})]})};try{Option.displayName="Option",Option.__docgenInfo={description:"",displayName:"Option",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"ChopLogicMultiSelectValue"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}}}}}catch{}const P=({options:e,opened:l,onClose:t,onSelect:r,dropdownId:o})=>{const d=g([m.dropdown,{[m.dropdown__opened]:l}]);return a.jsx("ul",{role:"listbox",id:o,tabIndex:-1,onKeyDown:n=>D({e:n,options:e,onClose:t}),className:d,children:e.map(n=>a.jsx(E,{value:n,onSelect:()=>r(n.id)},n.id))})};try{Dropdown.displayName="Dropdown",Dropdown.__docgenInfo={description:"",displayName:"Dropdown",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"ChopLogicMultiSelectValue[]"}},opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}}}}}catch{}function R({name:e,options:l,initialValues:t,defaultValue:r}){return l.map(o=>{let d=!1;return t&&(t!=null&&t[e])&&Array.isArray(t[e])&&t[e].find(i=>i===o.id||(i==null?void 0:i.id)===o.id)&&(d=!0),!(t!=null&&t[e])&&Array.isArray(r)&&r.find(i=>i===o.id)&&(d=!0),{...o,selected:d}})}const S=e=>e.filter(l=>l.selected).map(l=>l.id),U=(e,l)=>{const t=e.find(r=>r.id===l);return e.map(r=>r.id===l?{...r,selected:!(t!=null&&t.selected)}:r)};function T({name:e,defaultValue:l,onChange:t,options:r}){const[o,d]=x.useState(!1),{onChangeFormInput:n,initialValues:i}=x.useContext(I),s=R({name:e,options:r,initialValues:i,defaultValue:l}),[c,f]=x.useState(s),p=()=>d(!1),u=()=>d(!o),h=_=>{const b=U(c,_);f(b),t==null||t(b),n==null||n({name:e,value:S(b)})},y=x.useCallback(()=>{d(!1),f(s),n==null||n({name:e,value:S(s)})},[e]);return O(y),{handleClose:p,handleToggle:u,handleSelect:h,opened:o,values:c}}const Y=({options:e,name:l,label:t,required:r=!1,placeholder:o="Not selected",disabled:d=!1,onChange:n,defaultValue:i,id:s,className:c,...f})=>{const p=x.useRef(null),{elementId:u,dropdownId:h}=j(s),{handleClose:y,handleSelect:_,handleToggle:b,opened:C,values:q}=T({name:l,options:e,defaultValue:i,onChange:n}),V=g([m.wrapper,c]);return w({ref:p,onClickOutsideHandler:y}),N({keyCode:"Escape",ref:p,onKeyPress:y}),a.jsxs("div",{ref:p,...f,className:V,children:[a.jsx(A,{label:t,required:r,inputId:u}),a.jsx(K,{name:l,opened:C,comboboxId:u,dropdownId:h,onClick:b,values:q,placeholder:o,disabled:d,required:r}),a.jsx(P,{options:q,opened:C,onClose:y,dropdownId:h,onSelect:_})]})};try{MultiSelect.displayName="MultiSelect",MultiSelect.__docgenInfo={description:"",displayName:"MultiSelect",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"ChopLogicSelectValue[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((values?: ChopLogicSelectValue[]) => void)"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number | readonly string[]"}},placeholder:{defaultValue:{value:"Not selected"},description:"",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch{}export{Y as C};
