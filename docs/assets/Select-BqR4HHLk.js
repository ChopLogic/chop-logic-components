import{r as f,C as I,j as b}from"./iframe-CrArNGRw.js";import{u as h}from"./use-click-outside-BTqyhR4p.js";import{c as N,L as _,S as L,e as V}from"./Header-B5vN0EW1.js";import{u as j}from"./use-key-press-C4UT8Udw.js";import{u as k}from"./use-reset-form-input-8DRyh_nF.js";import{g as E}from"./get-class-name-CHDn80c0.js";import{s as R}from"./Select.module-DHd5GItA.js";import"./Icon-DIoQVp2Y.js";import"./Loader-BNVb9kEc.js";import"./Portal-Ew3E3LJ6.js";function O({name:t,options:d,initialValues:e,defaultValue:r}){var o;let l;return e&&e[t]&&(l=((o=e[t])==null?void 0:o.id)??e[t]),!(e!=null&&e[t])&&r&&typeof r=="string"&&(l=r),d.find(s=>s.id===l)}function P({name:t,defaultValue:d,onChange:e,options:r}){const{onChangeFormInput:l,initialValues:o}=f.useContext(I),s=O({name:t,options:r,defaultValue:d,initialValues:o}),[n,c]=f.useState(!1),[x,i]=f.useState(s),u=()=>c(!1),p=()=>c(!n),y=q=>{const a=r.find(S=>S.id===q);i(a),e==null||e(a),l==null||l({name:t,value:a==null?void 0:a.id})},C=()=>{i(void 0),e==null||e(void 0)},m=f.useCallback(()=>{c(!1),i(s),l==null||l({name:t,value:s==null?void 0:s.id})},[t]);return k(m),{selected:x,opened:n,handleClear:C,handleClose:u,handleToggle:p,handleSelect:y}}const M=({options:t,onChange:d,name:e,label:r,defaultValue:l,id:o,placeholder:s="Not selected",required:n=!1,disabled:c=!1,className:x,...i})=>{const u=f.useRef(null),{elementId:p,dropdownId:y}=N(o),{handleClear:C,handleClose:m,handleSelect:q,handleToggle:a,selected:S,opened:g}=P({options:t,onChange:d,defaultValue:l,name:e}),v=E([R.wrapper,x]);return h({ref:u,onClickOutsideHandler:m}),j({keyCode:"Escape",ref:u,onKeyPress:m}),b.jsxs("div",{ref:u,...i,className:v,children:[b.jsx(_,{label:r,required:n,inputId:p}),b.jsx(L,{name:e,opened:g,comboboxId:p,dropdownId:y,onClick:a,selected:S,placeholder:s,disabled:c,required:n}),b.jsx(V,{options:t,selected:S,opened:g,onClose:m,dropdownId:y,comboboxId:p,onSelect:q,onClear:C})]})};try{Select.displayName="Select",Select.__docgenInfo={description:"",displayName:"Select",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"ChopLogicSelectValue[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value?: ChopLogicSelectValue) => void)"}},placeholder:{defaultValue:{value:"Not selected"},description:"",name:"placeholder",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number | readonly string[]"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch{}export{M as C};
