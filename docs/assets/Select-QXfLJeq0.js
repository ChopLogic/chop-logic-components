import{j as d,r as x,C as I}from"./iframe-C3nnaSfA.js";import{u as v}from"./use-click-outside-D7yaXWQH.js";import{a as w,u as N}from"./use-key-press-C9iHSrXH.js";import{A as j,d as k,e as L}from"./Icon-BBWlz8VR.js";import{s as m,h as D,m as O}from"./Select.module-4lHQ571_.js";import{g as V}from"./get-class-name-CHDn80c0.js";import{u as E}from"./use-reset-form-input-BoFkPjiQ.js";import{L as K}from"./Input-BHIenv_q.js";import"./Loader-C-BUGyvV.js";import"./Portal-DRzz8wUD.js";const P=({opened:o,onClick:r,comboboxId:l,dropdownId:t,selected:e,name:i,placeholder:a,disabled:s,required:u})=>d.jsxs("button",{type:"button",name:i,value:e==null?void 0:e.id,role:"combobox","aria-haspopup":"listbox","aria-expanded":o,"aria-controls":t,id:l,onClick:r,disabled:s,"aria-required":u,className:m.combobox,children:[e!=null&&e.label?d.jsx("span",{children:e==null?void 0:e.label}):d.jsx("span",{children:a}),o?d.jsx(j,{}):d.jsx(k,{})]});try{Combobox.displayName="Combobox",Combobox.__docgenInfo={description:"",displayName:"Combobox",props:{opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},required:{defaultValue:null,description:"",name:"required",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},comboboxId:{defaultValue:null,description:"",name:"comboboxId",required:!0,type:{name:"string"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"ChopLogicSelectValue"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}}}catch{}const R=({value:o,selected:r,onSelect:l,onClear:t})=>{const{id:e,label:i}=o,a=V([m.option,{[m.option__selected]:r}]),s=p=>{r?t():l(p)},u=p=>n=>{switch(n.key){case" ":case"SpaceBar":case"Enter":n.preventDefault(),s(p);break}};return d.jsxs("li",{id:e,role:"option","aria-selected":r,tabIndex:0,onKeyDown:u(e),onClick:()=>s(e),className:a,children:[d.jsx("span",{children:i}),r&&d.jsx(L,{})]})};try{Option.displayName="Option",Option.__docgenInfo={description:"",displayName:"Option",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"ChopLogicSelectValue"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!0,type:{name:"() => void"}}}}}catch{}const A=({options:o,opened:r,onClose:l,onSelect:t,dropdownId:e,comboboxId:i,selected:a,onClear:s})=>{const u=n=>{t(n),l(),O(i)},p=V([m.dropdown,{[m.dropdown__opened]:r}]);return d.jsx("ul",{role:"listbox",id:e,tabIndex:-1,onKeyDown:n=>D({e:n,options:o,onClose:l}),className:p,children:o.map(n=>d.jsx(R,{value:n,onSelect:()=>u(n.id),onClear:s,selected:n.id===(a==null?void 0:a.id)},n.id))})};try{Dropdown.displayName="Dropdown",Dropdown.__docgenInfo={description:"",displayName:"Dropdown",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"ChopLogicSelectValue[]"}},opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},dropdownId:{defaultValue:null,description:"",name:"dropdownId",required:!0,type:{name:"string"}},comboboxId:{defaultValue:null,description:"",name:"comboboxId",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"ChopLogicSelectValue"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!0,type:{name:"() => void"}}}}}catch{}function B({name:o,options:r,initialValues:l,defaultValue:t}){var i;let e;return l&&l[o]&&(e=((i=l[o])==null?void 0:i.id)??l[o]),!(l!=null&&l[o])&&t&&typeof t=="string"&&(e=t),r.find(a=>a.id===e)}function T({name:o,defaultValue:r,onChange:l,options:t}){const{onChangeFormInput:e,initialValues:i}=x.useContext(I),a=B({name:o,options:t,defaultValue:r,initialValues:i}),[s,u]=x.useState(!1),[p,n]=x.useState(a),f=()=>u(!1),y=()=>u(!s),q=S=>{const c=t.find(_=>_.id===S);n(c),l==null||l(c),e==null||e({name:o,value:c==null?void 0:c.id})},C=()=>{n(void 0),l==null||l(void 0)},b=x.useCallback(()=>{u(!1),n(a),e==null||e({name:o,value:a==null?void 0:a.id})},[o]);return E(b),{selected:p,opened:s,handleClear:C,handleClose:f,handleToggle:y,handleSelect:q}}const Y=({options:o,onChange:r,name:l,label:t,defaultValue:e,id:i,placeholder:a="Not selected",required:s=!1,disabled:u=!1,className:p,...n})=>{const f=x.useRef(null),{elementId:y,dropdownId:q}=w(i),{handleClear:C,handleClose:b,handleSelect:S,handleToggle:c,selected:_,opened:g}=T({options:o,onChange:r,defaultValue:e,name:l}),h=V([m.wrapper,p]);return v({ref:f,onClickOutsideHandler:b}),N({keyCode:"Escape",ref:f,onKeyPress:b}),d.jsxs("div",{ref:f,...n,className:h,children:[d.jsx(K,{label:t,required:s,inputId:y}),d.jsx(P,{name:l,opened:g,comboboxId:y,dropdownId:q,onClick:c,selected:_,placeholder:a,disabled:u,required:s}),d.jsx(A,{options:o,selected:_,opened:g,onClose:b,dropdownId:q,comboboxId:y,onSelect:S,onClear:C})]})};try{Select.displayName="Select",Select.__docgenInfo={description:"",displayName:"Select",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"ChopLogicSelectValue[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value?: ChopLogicSelectValue) => void)"}},placeholder:{defaultValue:{value:"Not selected"},description:"",name:"placeholder",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number | readonly string[]"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},tabIndex:{defaultValue:null,description:"",name:"tabIndex",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch{}export{Y as C};
