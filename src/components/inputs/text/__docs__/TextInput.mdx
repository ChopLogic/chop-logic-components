import { Canvas, Meta } from '@storybook/blocks';
import Example from './TextInputExample.tsx';
import * as TextInput from './TextInput.stories.tsx';

<Meta of={TextInput} title='TextInput' />

# ChopLogicTextInput

Styled component for entering text, email or password. Supports validation with custom error message and all standard HTML input attributes.

### Example

<Canvas of={TextInput.DefaultTextInput} />

### Usage

```tsx
import { TextInput } from 'chop-logic-components';

const Example = () => {
  return (
    <ChopLogicTextInput
      label='Enter the formula:'
      name='formula'
      errorMessage='Only latin letters are allowed'
      validator={{ regexp: '^[A-Za-z ]+$' }}
      required
    />;
  );
};

export default Example;
```

### Props

_Required props_

- **name** `string` - A string that describes the input for internal use inside a form or another container. Use `camelCase` for the input name.
- **label** `string` - A visible label that describes the input purpose. Any string is acceptable.

_Optional props_

- **type** `'text' | 'email' | 'password'` - Input type. Default is "text".
- **id** `string` - Unique identifier of the input on the page. If not specified, the id will be generated automatically.
- **placeholder** `string` - A placeholder text inside the input field.
- **disabled** `boolean` - When disabled, the input cannot be interacted with. Defaults to `false`.
- **readOnly** `boolean` - When readonly, the input cannot be changed. Defaults to `false`.
- **required** `boolean` - A boolean indicating whether the input is required or not. Required input is marked with a red asterisk. Defaults to `false`.
- **clearable** `boolean` - A boolean indicating whether to display the input clear button. Defaults to `true`.
- **validator** `(input: string) => boolean | { regexp: string; flags?: string; }` - A function or object with a validation regular expression that checks whether the input value matches the given conditions. When invalid, the input becomes highlighted and displays an error message.
- **errorMessage** - An optional string that displays when the input value is incorrect.
- **onChange** `(event: React.ChangeEvent<HTMLInputElement>) => void` - A function that is called when a user type something in the input. It receives a ChangeEventHandler for handling the event on the input.
- **onFocus** `(event: React.FocusEvent<HTMLInputElement>) => void` - A function that is called when focus is set on the input.
- **onBlur** `(event: React.FocusEvent<HTMLInputElement>) => void` - A function that is called when focus leaves the input.
- **onClear** `() => void` - A function that is called when the input value is cleared using the Clear button.
- **maxLength** `number` - Maximum number of characters in the input.
- **autoComplete** `string` - The [HTML autocomplete attribute](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete). Defaults to `"off"`.
- **HTMLAttributes** - global HTML attributes: **className**, **title**, **style**, **tabIndex**, etc.

_Common props_

| Prop      | Type                  | Description                                                                                                      | Default     |
| --------- | --------------------- | ---------------------------------------------------------------------------------------------------------------- | ----------- |
| id        | `string`              | The id global attribute defines an identifier (ID) which must be unique in the whole document.                   | `undefined` |
| className | `string`              | The class global attribute is a list of the classes of the element.                                              | `undefined` |
| style     | `React.CSSProperties` | The style global attribute contains CSS styling declarations to be applied to the element.                       | `undefined` |
| tabIndex  | `number`              | The tabindex global attribute allows developers to make HTML elements focusable.                                 | `undefined` |
| title     | `string`              | The title global attribute contains text representing advisory information related to the element it belongs to. | `undefined` |

### Types

```ts
type ChopLogicTextInputProps = React.InputHTMLAttributes<HTMLInputElement> & {
  name: string;
  label: string;
  errorMessage?: string;
  clearable?: boolean;
  onClear?: () => void;
  type?: 'text' | 'email' | 'password';
  validator?: RegExpWithFlags | TextValidationFunction;
};
```

```ts
type RegExpWithFlags = {
  regexp: string;
  flags?: string;
};
```

```ts
type TextValidationFunction = (input: string) => boolean;
```
