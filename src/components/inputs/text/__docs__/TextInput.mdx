import { Canvas, Meta } from '@storybook/blocks';
import * as TextInput from './TextInput.stories.tsx';

<Meta of={TextInput} title='TextInput' />

# ChopLogicTextInput

Styled component for entering text, email or password. Supports validation with custom error message and all standard HTML input attributes.

### Example

<Canvas of={TextInput.DefaultTextInput} />

### Usage

```tsx
import { ChopLogicTextInput } from 'chop-logic-components';

const Example = () => {
  return (
    <ChopLogicTextInput
      label='Enter the formula:'
      name='formula'
      errorMessage='Only latin letters are allowed'
      validator={{ regexp: '^[A-Za-z ]+$' }}
      required
    />
  );
};

export default Example;
```

### Props

| Prop             | Type                                          | Description                                                                                                                              | Default          | Required |
|------------------|-----------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------|------------------|----------|
| **name**         | `string`                                      | A string representing the name attribute of the component, used for form submissions.                                                    | `undefined`      | Yes      |
| **label**        | `string`                                      | A string that represents the label for the component.                                                                                    | `undefined`      | Yes      |
| **type**         | `'text'` or `'email'` or `'password'`         | The input type attribute.                                                                                                                | `'text'`         | No       |
| **placeholder**  | `string`                                      | The placeholder property of the input interface represents a hint to the user of what can be entered in the control.                     | `'Type here...'` | No       |
| **defaultValue** | `string`                                      | The string that will be supplied as the default value of the input.                                                                      | `undefined`      | No       |
| **clearable**    | `boolean`                                     | A boolean indicating whether to display the input clear button.                                                                          | `false`          | No       |
| **validator**    | `RegExpWithFlags` or `TextValidationFunction` | A function or regular expression that allows you to validate an input value and display an error message if validation fails.            | `undefined`      | No       |
| **errorMessage** | `string`                                      | An optional string that displays when the input value is incorrect.                                                                      | `undefined`      | No       |
| **onChange**     | `ChangeEventHandler`                          | A function that is called when a user type something in the input. It receives a ChangeEventHandler for handling the event on the input. | `undefined`      | No       |
| **onFocus**      | `FocusEventHandler`                           | A function that is called when focus is set on the input.                                                                                | `undefined`      | No       |
| **onBlur**       | `FocusEventHandler`                           | A function that is called when focus leaves the input.                                                                                   | `undefined`      | No       |
| **onClear**      | `() => void`                                  | A function that is called when the clear input button is clicked.                                                                        | `undefined`      | No       |
| **maxLength**    | `number`                                      | Maximum number of characters in the input.                                                                                               | `undefined`      | No       |
| **autoComplete** | `string`                                      | The [HTML autocomplete attribute](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete).                            | `"off"`          | No       |
| **disabled**     | `boolean`                                     | When disabled, the input cannot be interacted with.                                                                                      | `false`          | No       |
| **required**     | `boolean`                                     | When required, the input must be filled before form submission.                                                                          | `false`          | No       |
| **readOnly**     | `boolean`                                     | When readonly, the input cannot be changed.                                                                                              | `false`          | No       |
| **id**           | `string`                                      | The id global attribute defines an identifier (ID) which must be unique in the whole document.                                           | `undefined`      | No       |
| **className**    | `string`                                      | The class global attribute is a list of the classes of the element.                                                                      | `undefined`      | No       |
| **style**        | `CSSProperties`                               | The style global attribute contains CSS styling declarations to be applied to the element.                                               | `undefined`      | No       |
| **tabIndex**     | `number`                                      | The tabindex global attribute allows developers to make HTML elements focusable.                                                         | `undefined`      | No       |
| **title**        | `string`                                      | The title global attribute contains text representing advisory information related to the element it belongs to.                         | `undefined`      | No       |
| **theme**        | `'light'` or `'dark'`                         | The component's color theme.                                                                                                             | `undefined`      | No       |

### Types

```ts
export type ChopLogicTextInputProps = CommonInputProps & {
  errorMessage?: string;
  clearable?: boolean;
  readOnly?: boolean;
  type?: 'text' | 'email' | 'password';
  validator?: RegExpWithFlags | TextValidationFunction;
  maxLength?: number;
  placeholder?: string;
  defaultValue?: string;
  onClear?: () => void;
  autoComplete?: React.HTMLInputAutoCompleteAttribute;
  onChange?: React.ChangeEventHandler<HTMLInputElement>;
  onBlur?: React.FocusEventHandler<HTMLInputElement>;
  onFocus?: React.FocusEventHandler<HTMLInputElement>;
};

export type RegExpWithFlags = {
  regexp: string;
  flags?: string;
};

export type TextValidationFunction = (input: string) => boolean;

export type CommonInputProps = CommonComponentProps & {
  label: string;
  name: string;
  disabled?: boolean;
  required?: boolean;
};

export type CommonComponentProps = {
  id?: string;
  className?: string;
  style?: React.CSSProperties;
  tabIndex?: number;
  title?: string;
  theme?: 'dark' | 'light';
};
```
